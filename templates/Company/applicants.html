{% extends 'base.html' %}
{% block title %}Applicants - JobVista{% endblock %}
{% block content %}
<div class="w-full px-6 lg:px-10 py-8" style="background: radial-gradient(1600px 900px at -10% -20%, #EEF2FF, transparent), radial-gradient(1400px 800px at 120% 0%, #F5F7FF, transparent);">
  <div class="max-w-7xl mx-auto">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl font-bold" style="color: var(--text-heading);">All Applicants</h1>
        <p class="text-sm text-gray-600">View and manage applications across your jobs</p>
      </div>
      <div class="flex items-center gap-3">
        <a href="{% url 'company_view' %}" class="btn-secondary-brand px-3 py-2 rounded-md">Back to Dashboard</a>
      </div>
    </div>

    <form method="get" class="mb-4 grid grid-cols-1 md:grid-cols-3 gap-3">
      <input type="text" name="q" value="{{ q }}" class="input w-full" placeholder="Search by applicant name" />
      <select name="job" class="input w-full">
        <option value="">All Jobs</option>
        {% for j in jobs %}
          <option value="{{ j.id }}" {% if selected_job_id == j.id|stringformat:"s" %}selected{% endif %}>{{ j.title }}</option>
        {% endfor %}
      </select>
      <button type="submit" class="btn-primary-brand px-4 py-2 rounded-md">Filter</button>
    </form>

    <div class="backdrop-blur bg-white/60 border rounded-2xl card-shadow overflow-hidden" style="border-color:#ffffff33;">
      <table class="min-w-full">
        <thead>
          <tr class="bg-white/70">
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600">Applicant</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600">Job</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600">Applied</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y" style="border-color: var(--border);">
          {% for app in applications %}
            <tr class="hover:bg-white/70 transition-colors cursor-pointer" onclick="window.location='{% url 'company_applicant_detail' app.id %}'">
              <td class="px-4 py-3">
                <span class="font-medium" style="color: var(--text-heading);">{{ app.user.get_full_name|default:app.user.username }}</span>
                <div class="text-xs text-gray-500">@{{ app.user.username }}</div>
              </td>
              <td class="px-4 py-3">
                <a href="{{ app.job.get_absolute_url }}" class="link">{{ app.job.title }}</a>
                <div class="text-xs text-gray-500">{{ app.job.location }}</div>
              </td>
              <td class="px-4 py-3">{{ app.created_at|timesince }} ago</td>
              <td class="px-4 py-3 text-sm space-x-2">
                <a class="link" href="mailto:{{ app.user.email }}">Contact</a>
                <span class="text-gray-300">|</span>
                <span class="text-gray-400">View CV</span>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="4" class="px-4 py-6 text-sm text-gray-500">No applications yet.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  </div>
{% endblock %}


